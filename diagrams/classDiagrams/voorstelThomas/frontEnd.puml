@startuml
scale 4000 width
package "ui" {

class CanvasWindow{

    }


    class UIHandler{
        __resp__
        controller for UI
    }
    UIHandler -> Layout : uses
    class Layout{
    __resp__
    information for layout
    }



    class Compositor{
        - subWindows: list<SubWindowWidget>
        __
        + addSubWindow()
        + removeSubWindow()
    }

    class UIStarter{

    }



    UIStarter --> Compositor : has



    Compositor -|> CanvasWindow

    package "commands" {

            class UICommand <<(A, lightgreen)>> {
             }

            PushCommand -|> UICommand


            UpdateCommand -|> UICommand

            class PushCommand <<(A, lightgreen)>> {
                + execute() : void
                + getReturn() : Boolean
                + clone() : PushCommand
                __resp__
                All commands pushing data to the backend
            }
            note left
                execute() moet prototype
                clone command posten.
                Clone.setOldValeu(o)
                clone.setNewVale(o)
                post(clone)
            end note

            class UpdateCommand <<(A, lightgreen)>> {
                        + update(pushCommand : PushCommand) : void
                        + update() : void
                    }


            class ConcreteCommandA{

            }

            class ConcreteCommandB{

            }

            class ConcreteCommandC{

            }

            class ConcreteCommandD{

            }

            ConcreteCommandA --|> PushCommand
            ConcreteCommandB --|> PushCommand
            ConcreteCommandC --|> UpdateCommand
            ConcreteCommandD --|> UpdateCommand

        }
        UICommand --> Compositor : uses

        UIHandler <-- UICommand : uses

        package "commandBus" {

                class CommandBus{
                + unsubscribe(subscriber : Object) : void
                + post(command : PushCommand) : void
                + subscribe(subscriber : Object) : void
                + undo() : void
                + redo() : void
                }
                class Subscription

                interface Subscribe <<(@, lightgreen)>>

                CommandBus -> Subscription : has

                CommandBus --> Subscribe : uses

                CommandBus <-> PushCommand : uses
            }

            package "widget" {

                    UpdateCommand -> Widget

                    class Widget {
                        -x: int
                        -y: int
                        -width: int
                        -height: int
                        #border: boolean
                        #blocked: boolean
                        __Inspectors__
                        +containsPoint(x: int, y: int): boolean
                        __Mutators__
                        +paint(g: Graphics): void
                        +handleKeyEvent(id: int, keyCode: int,
                            \t keyChar: char): boolean
                        +handleMouseEvent(id: int, x: int, y: int,
                            \t clickCount: int): boolean
                        +update(command: UICommand): void
                         }


                            class LabelWidget{
                                #text: String
                            }
                            LabelWidget --|> Widget


                            class EditorWidget{
                            }
                            EditorWidget --|> LabelWidget

                            class CheckBoxWidget{
                                -checked: boolean
                            }
                            CheckBoxWidget --|> Widget
                            class ButtonWidget{
                            }
                            ButtonWidget --|> LabelWidget


                            class SwitchBoxWidget{
                            }
                            SwitchBoxWidget --|> LabelWidget
                            package compositeWidgets{
                                class CompositeWidget{
                                    - widgets: LinkedList<Widget>
                                    __Mutators__
                                    + addWidget(w: Widget): void
                                    + removeWidget(w: Widget): void
                                }

                                CompositeWidget --|> Widget

                                class TableWidget{
                                }

                                TableWidget --|> CompositeWidget

                                class ColumnWidget{
                                }

                                ColumnWidget --|> CompositeWidget

                                class SelectorColumnWidget {
                                    -ids: LinkedList<Integer>
                                    __Inspectors__
                                    +getSelectedId(): int
                                }

                                SelectorColumnWidget --|> ColumnWidget

                                package componentWidgets{
                                    class ComponentWidget{
                                        -isActive: boolean
                                    }



                                    ComponentWidget --|> CompositeWidget


                                }
                            }

                }

                package "builder" {

                        UIHandler <-- ModeBuilder : uses

                        class ModeBuilder <<(A, lightgreen)>>{
                        }

                        class TablesModeBuilder{
                            + build(): SubWindowWidget
                        }

                        class FormBuilder{
                                                    + build(): SubWindowWidget
                                                }
                        note left
                            michie
                        end note

                        class DesignModeBuilder{
                            + build(tableId : int): SubWindowWidget

                        }

                        class RowsModeBuilder{
                            + build(tableId : int): SubWindowWidget
                        }

                        TablesModeBuilder --|> ModeBuilder
                        DesignModeBuilder --|> ModeBuilder
                        RowsModeBuilder --|> ModeBuilder
                        FormBuilder --|> ModeBuilder
                    }

                    ModeBuilder -> Widget : uses

                    ModeBuilder --> UICommand: uses

}


@enduml